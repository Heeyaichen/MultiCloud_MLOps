{"ast":null,"code":"import axios from 'axios';\n// API base URL - will be configured via environment variable or ingress\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Error handler\nconst handleError = error => {\n  if (error.response) {\n    // Server responded with error\n    console.error('API Error:', error.response.data);\n    throw error.response.data;\n  } else if (error.request) {\n    // Request made but no response\n    console.error('Network Error:', error.message);\n    throw new Error('Network error. Please check your connection.');\n  } else {\n    // Something else happened\n    console.error('Error:', error.message);\n    throw new Error(error.message);\n  }\n};\n\n// Ingestion Service APIs\nexport const ingestionApi = {\n  // Upload video\n  uploadVideo: async file => {\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      const response = await api.post('/ingestion/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      return handleError(error);\n    }\n  },\n  // Health check\n  healthCheck: async () => {\n    try {\n      const response = await api.get('/ingestion/health');\n      return response.data;\n    } catch (error) {\n      return handleError(error);\n    }\n  }\n};\n\n// Video Management APIs (via custom endpoint or direct DynamoDB query)\nexport const videoApi = {\n  // Get all videos\n  getAllVideos: async () => {\n    try {\n      // This would need a backend endpoint to query DynamoDB\n      // For now, we'll create a mock endpoint\n      const response = await api.get('/videos');\n      return response.data;\n    } catch (error) {\n      return handleError(error);\n    }\n  },\n  // Get video by ID\n  getVideoById: async videoId => {\n    try {\n      const response = await api.get(`/videos/${videoId}`);\n      return response.data;\n    } catch (error) {\n      return handleError(error);\n    }\n  },\n  // Get videos by status\n  getVideosByStatus: async status => {\n    try {\n      const response = await api.get(`/videos?status=${status}`);\n      return response.data;\n    } catch (error) {\n      return handleError(error);\n    }\n  }\n};\n\n// Human Review APIs\nexport const reviewApi = {\n  // Get review queue\n  getReviewQueue: async () => {\n    try {\n      const response = await api.get('/review/queue');\n      return response.data;\n    } catch (error) {\n      return handleError(error);\n    }\n  },\n  // Submit review decision\n  submitReview: async (videoId, approved, notes = '') => {\n    try {\n      const response = await api.post(`/review/review/${videoId}`, null, {\n        params: {\n          approved,\n          notes\n        }\n      });\n      return response.data;\n    } catch (error) {\n      return handleError(error);\n    }\n  },\n  // Get AI summary (if Azure OpenAI is enabled)\n  getAISummary: async videoId => {\n    try {\n      const response = await api.get(`/review/review/${videoId}/summary`);\n      return response.data;\n    } catch (error) {\n      return handleError(error);\n    }\n  },\n  // Health check\n  healthCheck: async () => {\n    try {\n      const response = await api.get('/review/health');\n      return response.data;\n    } catch (error) {\n      return handleError(error);\n    }\n  }\n};\n\n// Policy Engine APIs\nexport const policyApi = {\n  // Health check\n  healthCheck: async () => {\n    try {\n      const response = await api.get('/policy/health');\n      return response.data;\n    } catch (error) {\n      return handleError(error);\n    }\n  }\n};\n\n// Dashboard stats (aggregated from videos)\nexport const dashboardApi = {\n  // Get dashboard statistics\n  getStats: async () => {\n    try {\n      const response = await api.get('/dashboard/stats');\n      return response.data;\n    } catch (error) {\n      // If endpoint doesn't exist, calculate from videos\n      console.warn('Dashboard stats endpoint not available, calculating from videos');\n      const videos = await videoApi.getAllVideos();\n      return {\n        total: videos.length,\n        approved: videos.filter(v => v.status === 'approved').length,\n        rejected: videos.filter(v => v.status === 'rejected').length,\n        pending_review: videos.filter(v => v.status === 'review').length,\n        processing: videos.filter(v => ['uploaded', 'screened', 'analyzed', 'processing'].includes(v.status)).length\n      };\n    }\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","timeout","headers","handleError","error","response","console","data","request","message","Error","ingestionApi","uploadVideo","file","formData","FormData","append","post","healthCheck","get","videoApi","getAllVideos","getVideoById","videoId","getVideosByStatus","status","reviewApi","getReviewQueue","submitReview","approved","notes","params","getAISummary","policyApi","dashboardApi","getStats","warn","videos","total","length","filter","v","rejected","pending_review","processing","includes"],"sources":["/Users/chenkonsam/Projects/MLOps_Project/frontend/src/services/api.ts"],"sourcesContent":["import axios, { AxiosError } from 'axios';\nimport { Video, UploadResponse, ReviewQueueItem } from '../types';\n\n// API base URL - will be configured via environment variable or ingress\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Error handler\nconst handleError = (error: AxiosError) => {\n  if (error.response) {\n    // Server responded with error\n    console.error('API Error:', error.response.data);\n    throw error.response.data;\n  } else if (error.request) {\n    // Request made but no response\n    console.error('Network Error:', error.message);\n    throw new Error('Network error. Please check your connection.');\n  } else {\n    // Something else happened\n    console.error('Error:', error.message);\n    throw new Error(error.message);\n  }\n};\n\n// Ingestion Service APIs\nexport const ingestionApi = {\n  // Upload video\n  uploadVideo: async (file: File): Promise<UploadResponse> => {\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const response = await api.post<UploadResponse>('/ingestion/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      return response.data;\n    } catch (error) {\n      return handleError(error as AxiosError);\n    }\n  },\n\n  // Health check\n  healthCheck: async (): Promise<{ status: string }> => {\n    try {\n      const response = await api.get('/ingestion/health');\n      return response.data;\n    } catch (error) {\n      return handleError(error as AxiosError);\n    }\n  },\n};\n\n// Video Management APIs (via custom endpoint or direct DynamoDB query)\nexport const videoApi = {\n  // Get all videos\n  getAllVideos: async (): Promise<Video[]> => {\n    try {\n      // This would need a backend endpoint to query DynamoDB\n      // For now, we'll create a mock endpoint\n      const response = await api.get<Video[]>('/videos');\n      return response.data;\n    } catch (error) {\n      return handleError(error as AxiosError);\n    }\n  },\n\n  // Get video by ID\n  getVideoById: async (videoId: string): Promise<Video> => {\n    try {\n      const response = await api.get<Video>(`/videos/${videoId}`);\n      return response.data;\n    } catch (error) {\n      return handleError(error as AxiosError);\n    }\n  },\n\n  // Get videos by status\n  getVideosByStatus: async (status: string): Promise<Video[]> => {\n    try {\n      const response = await api.get<Video[]>(`/videos?status=${status}`);\n      return response.data;\n    } catch (error) {\n      return handleError(error as AxiosError);\n    }\n  },\n};\n\n// Human Review APIs\nexport const reviewApi = {\n  // Get review queue\n  getReviewQueue: async (): Promise<{ items: ReviewQueueItem[]; count: number }> => {\n    try {\n      const response = await api.get('/review/queue');\n      return response.data;\n    } catch (error) {\n      return handleError(error as AxiosError);\n    }\n  },\n\n  // Submit review decision\n  submitReview: async (\n    videoId: string,\n    approved: boolean,\n    notes: string = ''\n  ): Promise<{ video_id: string; decision: string; reviewed_at: string; notes: string }> => {\n    try {\n      const response = await api.post(`/review/review/${videoId}`, null, {\n        params: { approved, notes },\n      });\n      return response.data;\n    } catch (error) {\n      return handleError(error as AxiosError);\n    }\n  },\n\n  // Get AI summary (if Azure OpenAI is enabled)\n  getAISummary: async (videoId: string): Promise<{ summary: string; cached: boolean }> => {\n    try {\n      const response = await api.get(`/review/review/${videoId}/summary`);\n      return response.data;\n    } catch (error) {\n      return handleError(error as AxiosError);\n    }\n  },\n\n  // Health check\n  healthCheck: async (): Promise<{ status: string; queue_size: number; ai_copilot_enabled: boolean }> => {\n    try {\n      const response = await api.get('/review/health');\n      return response.data;\n    } catch (error) {\n      return handleError(error as AxiosError);\n    }\n  },\n};\n\n// Policy Engine APIs\nexport const policyApi = {\n  // Health check\n  healthCheck: async (): Promise<{ status: string }> => {\n    try {\n      const response = await api.get('/policy/health');\n      return response.data;\n    } catch (error) {\n      return handleError(error as AxiosError);\n    }\n  },\n};\n\n// Dashboard stats (aggregated from videos)\nexport const dashboardApi = {\n  // Get dashboard statistics\n  getStats: async (): Promise<{\n    total: number;\n    approved: number;\n    rejected: number;\n    pending_review: number;\n    processing: number;\n  }> => {\n    try {\n      const response = await api.get('/dashboard/stats');\n      return response.data;\n    } catch (error) {\n      // If endpoint doesn't exist, calculate from videos\n      console.warn('Dashboard stats endpoint not available, calculating from videos');\n      const videos = await videoApi.getAllVideos();\n      \n      return {\n        total: videos.length,\n        approved: videos.filter(v => v.status === 'approved').length,\n        rejected: videos.filter(v => v.status === 'rejected').length,\n        pending_review: videos.filter(v => v.status === 'review').length,\n        processing: videos.filter(v => ['uploaded', 'screened', 'analyzed', 'processing'].includes(v.status)).length,\n      };\n    }\n  },\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}